
// Include theming for Angular Material with `mat.theme()`.
// This Sass mixin will define CSS variables that are used for styling Angular Material
// components according to the Material 3 design spec.
// Learn more about theming and how to use it for your application's
// custom components at https://material.angular.dev/guide/theming
@use '@angular/material' as mat;

@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

:root {
  --brand-base: #4b1e3a;
  --brand-accent: #7a294f;
  --brand-soft: #f7eef3;
  --brand-contrast: #f5dce8;
  --brand-text: #1f1722;
}

html {
  height: 100%;
  @include mat.theme((
    color: (
      primary: mat.$m2-indigo-palette,
      tertiary: mat.$m2-pink-palette,
    ),
    typography: Poppins,
    density: 0,
  ));
}

body {
  // Default the application to a light color theme. This can be changed to
  // `dark` to enable the dark color theme, or to `light dark` to defer to the
  // user's system settings.
  color-scheme: light;

  // Set a default background, font and text colors for the application using
  // Angular Material's system-level CSS variables. Learn more about these
  // variables at https://material.angular.dev/guide/system-variables
  background-color: var(--mat-sys-surface);
  color: var(--mat-sys-on-surface);
  font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI', sans-serif;

  // Reset the user agent margin.
  margin: 0;
  height: 100%;
}

body {
  background: linear-gradient(180deg, #fdf9fb, #f7eef3);
  color: var(--brand-text);
}

.mat-mdc-select-panel {
  background: #ffffff !important;
  color: var(--brand-text);
  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.16);
}

.mat-mdc-select-panel .mdc-list-item__primary-text {
  color: var(--brand-text);
}

.mat-mdc-dialog-surface {
  background: #ffffff !important;
  color: var(--brand-text);
  box-shadow: 0 18px 38px rgba(0, 0, 0, 0.22);
}

.mat-mdc-raised-button.mat-primary,
.mat-mdc-unelevated-button.mat-primary,
.mat-mdc-outlined-button.mat-primary,
.mat-mdc-flat-button.mat-primary {
  background: var(--brand-base) !important;
  color: #ffffff !important;
  border-color: var(--brand-base) !important;
}

.mat-mdc-stroked-button.mat-primary {
  border-color: var(--brand-base);
  color: var(--brand-base);
}

.brand-bg-dark {
  background: var(--brand-base) !important;
  color: #ffffff !important;
}

.brand-text-light {
  color: #ffffff !important;
}


/* ============================================================
   ESTILOS PREMIUM: DROPDOWN RESPONSIVE (MOVIL vs PC)
============================================================ */

/* 1. EL CONTENEDOR PADRE (POSICIONAMIENTO INTELIGENTE) */
div.cdk-overlay-pane:has(.custom-scroll-panel) {
  position: absolute !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  margin-top: 10px !important;
  
  /* üíª MODO PC (Pantallas grandes) */
  @media (min-width: 768px) {
    width: 700px !important; /* Ancho fijo igual al buscador */
  }

  /* üì± MODO M√ìVIL (Pantallas peque√±as) */
  @media (max-width: 767px) {
    width: 95vw !important; /* 95% del ancho de la pantalla */
    max-width: 400px !important; /* Que no se haga gigante en tablets chicas */
  }
}

/* 2. EL PANEL VISIBLE (M√ÅS ALTO AHORA) üìè */
.mat-mdc-autocomplete-panel.custom-scroll-panel {
  /* Fondo y Color */
  background-color: #ffffff !important;
  color: #1f1722 !important;
  
  /* Est√©tica "Premium" */
  border-radius: 20px !important;
  border: 1px solid rgba(0,0,0,0.05) !important;
  box-shadow: 0 20px 60px -10px rgba(75, 30, 58, 0.25) !important;
  padding: 8px !important;
  
  /* üî• AQU√ç EST√Å EL CAMBIO DE ALTURA üî• */
  /* Antes: 450px. Ahora: 600px (o 80% de la pantalla, lo que sea menor) */
  max-height: 500px !important; 
  max-height: 70vh !important; /* Seguridad para pantallas bajitas */
  
  /* Scrollbar Personalizado */
  &::-webkit-scrollbar { width: 6px; }
  &::-webkit-scrollbar-track { background: transparent; }
  &::-webkit-scrollbar-thumb { background: #e0e0e0; border-radius: 10px; }
  &::-webkit-scrollbar-thumb:hover { background: #bdbdbd; }
  
  /* Variables de Color */
  --mat-autocomplete-background-color: #ffffff !important;
  --mat-option-label-text-color: #1f1722 !important;
}

/* 3. LAS TARJETAS (CADA CLIENTE) */
.custom-scroll-panel .mat-mdc-option {
  background-color: white !important;
  min-height: 75px !important;
  margin-bottom: 5px !important;
  border-radius: 15px !important; /* Bordes redondos en cada √≠tem */
  padding: 0 15px !important;
  border: 1px solid transparent !important; /* Preparar para hover */
  transition: all 0.2s ease !important; /* Animaci√≥n suave */
}

/* Efecto Hover (Al pasar el mouse o dedo) */
.custom-scroll-panel .mat-mdc-option:hover,
.custom-scroll-panel .mat-mdc-option.mat-mdc-option-active {
  background-color: #fff0f5 !important; /* Rosado muy suave */
  border-color: #f8bbd0 !important;      /* Borde rosadito */
  transform: translateY(-2px);           /* Peque√±o salto hacia arriba */
  box-shadow: 0 4px 12px rgba(0,0,0,0.05) !important;
}

/* 4. SECCIONES ESPECIALES (CONSUMIDOR FINAL / CREAR) */
/* Diferenciar la opci√≥n de "Consumidor Final" */
.custom-scroll-panel .option-anon {
  background-color: #fafafa !important; /* Un gris muy clarito */
  border-bottom: 2px dashed #eee !important;
}

/* 5. TEXTO Y CONTENIDO (ARREGLO DE FORMATO) */
.custom-scroll-panel .mdc-list-item__primary-text {
  width: 100% !important;
  white-space: normal !important;
  line-height: normal !important;
  display: flex !important;
  flex-direction: column !important;
  justify-content: center !important;
}

/* Estructura Interna */
.custom-scroll-panel .row-content { 
  display: flex; align-items: center; gap: 15px; width: 100%; 
}

/* Avatar - Dise√±o Mejorado */
.custom-scroll-panel .avatar-circle {
  width: 48px; height: 48px; 
  border-radius: 50%;
  flex-shrink: 0;
  display: flex; align-items: center; justify-content: center;
  font-weight: 700; font-size: 1.1rem;
  box-shadow: 0 3px 10px rgba(0,0,0,0.05); /* Sombrita en el avatar */
  
  /* Colores por defecto */
  background: #f3e5f5 !important; color: #4b1e3a !important; 
}

/* Avatar Verde para "Crear Cliente" */
.custom-scroll-panel .avatar-circle.add { 
  background: #e8f5e9 !important; color: #2e7d32 !important; 
}

/* Textos */
.custom-scroll-panel .text-info { display: flex; flex-direction: column; }

.custom-scroll-panel .main-text { 
  font-weight: 700; font-size: 1rem; color: #333; 
  display: block; margin-bottom: 2px;
}

.custom-scroll-panel .sub-text { 
  font-size: 0.85rem; color: #777; display: block; 
}