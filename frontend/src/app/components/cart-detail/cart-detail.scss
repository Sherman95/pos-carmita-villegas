// CONTENEDOR PRINCIPAL
.cart-container {
  display: flex; flex-direction: column; height: 100%;
  background-color: #f8f9fa;
  min-width: 350px; // Ancho m√≠nimo si es un dialog
}

// 1. HEADER VINO TINTO
.cart-header {
  background: linear-gradient(135deg, #4b1e3a 0%, #2e0e22 100%);
  color: white;
  padding: 20px 20px 25px;
  display: flex; justify-content: space-between; align-items: flex-start;
  flex-shrink: 0; // No se encoge

  .header-info {
    h2 { margin: 0; font-size: 1.4rem; font-weight: 700; letter-spacing: -0.5px; }
    p { margin: 5px 0 0; opacity: 0.8; font-size: 0.9rem; }
  }
  .close-btn { color: white; background: rgba(255,255,255,0.1); }
}

// 2. CONTENIDO SCROLLABLE
.cart-scroll-content {
  flex: 1; overflow-y: auto; padding: 20px;
  margin-top: -15px; // Efecto solapado
  
  // TARJETA CLIENTE
  .client-card {
    background: white; border-radius: 12px; padding: 15px;
    margin-bottom: 20px; border: 1px solid #eee;
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);

    .current-client {
      display: flex; align-items: center; gap: 12px; margin-bottom: 15px;
      .icon-box {
        width: 40px; height: 40px; background: #fce4ec; color: #880e4f;
        border-radius: 50%; display: flex; align-items: center; justify-content: center;
      }
      .meta {
        display: flex; flex-direction: column;
        .label { font-size: 0.75rem; color: #888; text-transform: uppercase; }
        .value { font-weight: 700; color: #333; font-size: 1rem; }
      }
    }

    .search-field { width: 100%; }
  }

  // LISTA DE PRODUCTOS
  .items-list {
    display: flex; flex-direction: column; gap: 10px;

    .cart-item {
      background: white; border-radius: 12px; padding: 12px;
      display: flex; align-items: center; gap: 10px;
      border: 1px solid #eee;

      .btn-delete { color: #d32f2f; transform: scale(0.9); }
      
      .qty-badge {
        background: #f3e5f5; color: #4b1e3a; font-weight: 700;
        padding: 4px 8px; border-radius: 6px; font-size: 0.9rem;
      }

      .item-desc {
        flex: 1;
        .name { font-weight: 600; color: #333; line-height: 1.2; }
        .unit { font-size: 0.8rem; color: #999; }
      }

      .item-total { font-weight: 700; font-size: 1.05rem; color: #333; }
    }

    .empty-state {
      text-align: center; color: #ccc; margin-top: 40px;
      mat-icon { font-size: 60px; width: 60px; height: 60px; margin-bottom: 10px; opacity: 0.5; }
      p { font-size: 1.1rem; margin: 0; }
    }
  }
}

// 3. FOOTER FIJO
.cart-footer-panel {
  background: white; padding: 20px;
  border-top: 1px solid #eee;
  box-shadow: 0 -5px 20px rgba(0,0,0,0.05);
  flex-shrink: 0;

  .totals-block {
    margin-bottom: 20px;
    .row { 
      display: flex; justify-content: space-between; margin-bottom: 6px; 
      font-size: 0.9rem; color: #666; 
      .num { font-weight: 500; color: #333; }
    }
    .divider { height: 1px; background: #eee; margin: 10px 0; }
    .grand-total { 
      font-size: 1.4rem; font-weight: 800; color: #4b1e3a; 
      align-items: center; margin-top: 5px;
    }
  }

  .actions-row {
    display: flex; gap: 10px;
    button { height: 50px; border-radius: 25px; font-weight: 600; flex: 1; }
    .btn-pay {
      background: #4b1e3a; color: white; flex: 1.5; font-size: 1.1rem;
    }
  }
}

// --- ESTILOS DEL AUTOCOMPLETE (Avatares) ---
::ng-deep .custom-autocomplete {
  border-radius: 0 0 12px 12px !important;
  background: white;
  box-shadow: 0 5px 20px rgba(0,0,0,0.15) !important;

  .mat-mdc-option {
    height: 60px !important; padding: 0 15px !important;
    border-bottom: 1px solid #f8f8f8;

    .row-flex {
      display: flex; align-items: center; gap: 12px; width: 100%;
      
      .avatar-mini {
        width: 36px; height: 36px; border-radius: 50%;
        background: #eee; color: #666;
        display: flex; align-items: center; justify-content: center;
        flex-shrink: 0;
        font-weight: 700;

        &.text { background: #f3e5f5; color: #4b1e3a; }
        mat-icon { font-size: 20px; width: 20px; height: 20px; }
      }

      .text-col {
        display: flex; flex-direction: column; line-height: 1.2;
        .name { font-weight: 600; font-size: 0.95rem; color: #333; }
        small { font-size: 0.75rem; color: #999; }
      }
    }
  }
}

// Ajustes Material
::ng-deep .mat-mdc-form-field-subscript-wrapper { display: none; }