<div class="home-container">
  
  <header class="hero-section">
    <div class="hero-content">
      <div class="greeting">
        <h1>Hola, Carmita ðŸ‘‹</h1>
        <p>Â¿A quiÃ©n consentimos hoy?</p>
      </div>
      
      <div class="search-container">
        <mat-card class="search-card elevation-z4">
          <mat-icon class="search-icon">search</mat-icon>
          
          <input type="text"
                 class="pro-input"
                 placeholder="Buscar cliente..."
                 [ngModel]="searchText()"
                 (ngModelChange)="onSearchChange($event)"
                 [matAutocomplete]="auto"
                 (click)="onFocus()"
                 (focus)="onFocus()"
                 #searchInput>

          @if (searchText()) {
            <button mat-icon-button class="clear-btn" (click)="limpiarBusqueda(); $event.stopPropagation()">
              <mat-icon>close</mat-icon>
            </button>
          } @else {
            <button mat-icon-button class="clear-btn" (click)="onFocus()">
               <mat-icon>expand_more</mat-icon>
            </button>
          }
        </mat-card>

        <mat-autocomplete #auto="matAutocomplete" 
                          (optionSelected)="onOptionSelected($event)"
                          class="custom-scroll-panel">
           
           <mat-option value="anon" class="option-anon">
             <div class="row-content">
               <div class="avatar-circle"><mat-icon>person_outline</mat-icon></div>
               <div class="text-info">
                 <span class="main-text">Consumidor Final</span>
                 <span class="sub-text">Venta rÃ¡pida</span>
               </div>
             </div>
           </mat-option>

           <mat-divider></mat-divider>

           @for (c of filteredClients(); track c.id) {
             <mat-option [value]="c" class="option-client">
               <div class="row-content">
                 <div class="avatar-circle client">{{ c.nombre.charAt(0).toUpperCase() }}</div>
                 <div class="text-info">
                   <span class="main-text">{{ c.nombre }}</span>
                   <span class="sub-text">{{ c.cedula || 'S/N' }}</span>
                 </div>
               </div>
             </mat-option>
           }

           @if (searchText() && filteredClients().length === 0) {
             <mat-option [value]="'NEW_CLIENT'" class="option-create">
               <div class="row-content create">
                 <div class="avatar-circle add"><mat-icon>add</mat-icon></div>
                 <div class="text-info">
                   <span class="main-text">Crear: "{{ searchText() }}"</span>
                 </div>
               </div>
             </mat-option>
           }

        </mat-autocomplete>
      </div>
    </div>
  </header>

  <section class="dashboard-grid">
    
    <div class="dashboard-card primary big-action" (click)="irAVenta()">
      <div class="content-flex">
        <div class="icon-box"><mat-icon>point_of_sale</mat-icon></div>
        <div class="text-box">
          <h3>Cobrar</h3>
          <p>Ir al catÃ¡logo</p>
        </div>
        <mat-icon class="arrow">arrow_forward</mat-icon>
      </div>
    </div>

    <div class="dashboard-card info" (click)="irAHistorial()">
      <div class="icon-box"><mat-icon>history</mat-icon></div>
      <h3>Historial</h3>
    </div>

    <div class="dashboard-card success" (click)="irAReportes()">
      <div class="icon-box"><mat-icon>trending_up</mat-icon></div>
      <h3>Reportes</h3>
    </div>

    <div class="dashboard-card warn" (click)="irAClientes()">
      <div class="icon-box"><mat-icon>group</mat-icon></div>
      <h3>Clientes</h3>
    </div>

  </section>
</div>