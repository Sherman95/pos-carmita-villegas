// VARIABLES
$vino-main: #4b1e3a;
$vino-dark: #2e0e22;
$gris-fondo: #eef2f6; 
$blanco: #ffffff;
$verde-add: #10b981;
$borde-tarjeta: 1px solid #cbd5e1;
$sombra-card: 0 4px 12px rgba(0,0,0,0.08);

.page-container {
    min-height: 100vh;
    background-color: $gris-fondo;
    display: flex; flex-direction: column;
}

// 1. CABECERA CURVA
.header-section {
    height: 240px; 
    background: linear-gradient(135deg, $vino-main 0%, $vino-dark 100%);
    padding: 30px 20px 0;
    border-bottom-left-radius: 40px;
    border-bottom-right-radius: 40px;
    text-align: center;
    position: relative; z-index: 1;
    color: white;
    box-shadow: 0 4px 20px rgba(0,0,0,0.15);

    h1 { font-size: 2rem; font-weight: 800; margin: 0; text-shadow: 0 2px 4px rgba(0,0,0,0.2); }
    p { opacity: 0.95; margin-top: 5px; font-size: 1rem; font-weight: 500; }
    
    .search-wrapper {
        margin: 25px auto 0; max-width: 600px; // Buscador m谩s ancho
        background: white; border-radius: 50px; padding: 5px 20px;
        display: flex; align-items: center; gap: 10px;
        box-shadow: 0 8px 25px rgba(0,0,0,0.25); 

        .search-icon { color: #64748b; }
        input { flex: 1; border: none; outline: none; height: 45px; font-size: 1rem; color: #333; background: transparent; }
        .clear-btn { color: #94a3b8; }
    }
}

// 2. CONTENEDOR PRINCIPAL (FULL WIDTH)
.clients-wrapper {
    margin-top: -50px; 
    padding: 0 20px 40px;
    //  CAMBIO: Ocupar casi toda la pantalla en PC
    max-width: 1800px; 
    width: 98%; 
    margin-left: auto; margin-right: auto;
    position: relative; z-index: 2;
}

.actions-bar {
    display: flex; justify-content: center; margin-bottom: 25px;
    .btn-new {
        background: $verde-add; color: white; 
        height: 50px; border-radius: 25px; 
        font-weight: 700; padding: 0 35px;
        box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
        border: 2px solid white;
        font-size: 1rem;
    }
}

// 3. GRID DE CLIENTES (INTELIGENTE)
.clients-grid {
    display: grid; 
    gap: 15px;

    //  MGIA RESPONSIVE:
    // Se adapta autom谩ticamente. Si tu pantalla es gigante, pondr谩 5 o 6 columnas.
    // Si es laptop, pondr谩 3 o 4.
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));

    .client-card {
        background: white; border-radius: 16px; padding: 15px;
        border: $borde-tarjeta; box-shadow: $sombra-card;
        cursor: pointer; transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s;
        display: flex; align-items: center; gap: 15px;
        position: relative; overflow: hidden;

        &:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.12);
            border-color: $vino-main;
            
            // Mostrar bot贸n borrar claramente al pasar mouse
            .delete-btn { opacity: 1; background: #fee2e2; }
        }
        &:active { transform: scale(0.98); }

        .card-left {
            .avatar-circle {
                width: 55px; height: 55px; border-radius: 50%;
                color: white; font-weight: 800; font-size: 1.4rem;
                display: flex; align-items: center; justify-content: center;
                box-shadow: 0 4px 10px rgba(0,0,0,0.15);
            }
        }

        .card-center {
            flex: 1; overflow: hidden;
            display: flex; flex-direction: column; gap: 4px;

            .name { 
                margin: 0; font-size: 1.05rem; color: #1e293b; font-weight: 700; 
                white-space: nowrap; overflow: hidden; text-overflow: ellipsis; 
            }
            
            .details-row {
                display: flex; gap: 6px; flex-wrap: wrap;
                .badge {
                    display: flex; align-items: center; gap: 4px;
                    background: #f1f5f9; color: #475569; font-size: 0.75rem;
                    padding: 2px 8px; border-radius: 6px; font-weight: 600;
                    white-space: nowrap;
                    mat-icon { font-size: 14px; width: 14px; height: 14px; }
                }
            }
            .email-text { 
                display: block; font-size: 0.8rem; color: #94a3b8; 
                white-space: nowrap; overflow: hidden; text-overflow: ellipsis; 
            }
        }

        .card-right {
            display: flex; flex-direction: column; align-items: flex-end; gap: 5px;
            
            // Bot贸n Borrar
            .delete-btn { 
                color: #ef4444; 
                width: 35px; height: 35px; 
                display: flex; align-items: center; justify-content: center;
                border-radius: 8px;
                transition: all 0.2s;
                
                // En m贸vil siempre visible, en PC tenue hasta hover
                opacity: 0.6; 
                &:hover { opacity: 1; background: #fee2e2; transform: scale(1.1); }
            }
            
            .edit-icon { color: #cbd5e1; font-size: 20px; }
        }
    }
}

// EMPTY STATE
.empty-state {
    text-align: center; padding: 80px 20px;
    background: white; border-radius: 24px;
    border: $borde-tarjeta; box-shadow: $sombra-card;
    grid-column: 1 / -1; // Que ocupe todo el ancho si no hay datos

    .icon-circle {
        width: 80px; height: 80px; background: #f1f5f9;
        border-radius: 50%; margin: 0 auto 20px;
        display: flex; align-items: center; justify-content: center;
        mat-icon { font-size: 40px; width: 40px; height: 40px; color: #cbd5e1; }
    }
    h3 { margin: 0; font-size: 1.3rem; color: #333; }
    p { color: #666; margin-bottom: 20px; }
}

// MODAL
.modern-dialog {
    .dialog-header {
        padding: 20px 25px; border-bottom: 1px solid #f1f5f9;
        display: flex; justify-content: space-between; align-items: center;
        background: #fafafa;
        h2 { margin: 0; color: $vino-main; font-weight: 700; }
        .close-btn { color: #94a3b8; }
    }
    .dialog-body { padding: 30px 25px; }
    .dialog-subtitle { margin: 0 0 20px; color: #64748b; font-size: 0.95rem; }
    
    .error-box { 
        background: #fee2e2; color: #b91c1c; padding: 12px; border-radius: 8px; 
        margin-bottom: 20px; display: flex; align-items: center; gap: 10px; font-weight: 600; font-size: 0.9rem;
        border: 1px solid #fca5a5;
    }

    .form-grid-2 {
        display: grid; grid-template-columns: 1fr 1fr; gap: 15px;
        @media (max-width: 600px) { grid-template-columns: 1fr; } // 1 col en m贸vil
        
        .col-span-2 { grid-column: span 2; @media (max-width: 600px) { grid-column: span 1; } }
        
        ::ng-deep .mdc-text-field--filled {
            background: #f8fafc; border-radius: 12px; border: 1px solid #cbd5e1;
            &:hover { background: #f1f5f9; }
        }
    }

    .dialog-actions {
        padding: 20px 25px; display: flex; justify-content: flex-end; gap: 10px; background: white;
        .save-btn { height: 48px; padding: 0 35px; border-radius: 12px; font-weight: 700; box-shadow: 0 4px 15px rgba(75, 30, 58, 0.2); }
    }
}

.fade-in { animation: fadeIn 0.4s ease-out; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }